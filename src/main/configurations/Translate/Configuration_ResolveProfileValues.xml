<Module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../FrankConfig.xsd">
    <Adapter name="ResolveProfileValues"
        active="${ResolveProfileValues.Active}"
        description="">

        <Receiver
            name="ResolveProfileValues"
            >
            <JavaListener
                name="ResolveProfileValues"
                returnedSessionKeys="Error"
                />
        </Receiver>

        <Pipeline>
            <Exits>
                <Exit name="EXIT" state="SUCCESS" />
                <Exit name="EXCEPTION" state="ERROR" />
            </Exits>

            <Cache />

            <LocalFileSystemPipe
                name="ReadFile"
                action="read"
                >
                <Param name="filename" value="${configurations.directory}/Translate/Profiles.json" />
                <Forward name="success" path="MergeProfileDefaultsWithProfilesSender" />
                <Forward name="exception" path="EXCEPTION" />
            </LocalFileSystemPipe>

            <SenderPipe
                name="MergeProfileDefaultsWithProfilesSender"
                >
				<JavascriptSender
                    name="MergeProfileDefaultsWithProfilesJavascriptSender"
                    jsFileName="MergeProfileDefaultsWithProfiles.js"
                    jsFunctionName="mergeProfileDefaultsWithProfiles"
                    >
				</JavascriptSender>
                <Param name="profilesFile" />
                <Forward name="success" path="JsonToXml" />
                <Forward name="exception" path="EXCEPTION" />
			</SenderPipe>

            <JsonPipe
                name="JsonToXml"
                >
                <Forward name="success" path="EXIT" />
                <Forward name="exception" path="EXCEPTION" />
            </JsonPipe>
        </Pipeline>
    </Adapter>
</Module>